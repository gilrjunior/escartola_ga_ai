{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Escartola - Otimizador de Escala√ß√µes</title>

<link rel="icon" type="image/png" href="{% static 'logo.png' %}">

<style>
  :root{
    --logo-size-start: clamp(260px, 38vmin, 460px);
    --logo-size-end:   clamp(88px, 12.5vmin, 140px);
    --t-splash: 900ms;
    --t-card:   600ms;
    --brand-1: #1B5E20;
    --brand-2: #2E7D32;
    --radius: 16px;
  }

  *{margin:0;padding:0;box-sizing:border-box;}
  body{
    font-family: system-ui, Segoe UI, Arial, sans-serif;
    background: linear-gradient(135deg,#1B5E20 0%, #2E7D32 100%);
    min-height:100vh;
    display:grid;
    place-items:center;
    color:#0e2f14;
    padding:18px;
  }

  /* ===== App ~75% da viewport ===== */
  .app{
    width: min(75vw, 1200px);
    min-width: min(92vw, 560px);
    background: rgba(255,255,255,.96);
    border-radius: var(--radius);
    box-shadow: 0 18px 40px rgba(0,0,0,.22);
    display: grid;
    grid-template-rows: auto auto 1fr;
    gap: 14px;
    padding: 18px clamp(16px, 3vw, 28px);
    backdrop-filter: saturate(120%) blur(0px);
    transition: backdrop-filter var(--t-card) ease, box-shadow var(--t-card) ease;
  }
  .app.ready{ backdrop-filter: saturate(120%) blur(2px); }

  /* ===== Header ===== */
  .header{
    display:grid;
    grid-template-columns:auto 1fr auto;
    align-items:center;
    gap: 14px;
  }
  .logo{
    width:var(--logo-size-end); height:var(--logo-size-end);
    background:url("{% static 'logo.png' %}") center/contain no-repeat;
    border-radius: 14px;
    filter: drop-shadow(0 6px 16px rgba(0,0,0,.25));
  }
  .title{display:flex;flex-direction:column;gap:6px;}
  .title h1{font-size:clamp(28px,3.4vmin,40px); color:var(--brand-1); font-weight:800;}
  .subtitle{font-size:clamp(14px,1.9vmin,18px); color:var(--brand-2); font-weight:600;}

  .cta{
    background:linear-gradient(45deg,var(--brand-1),var(--brand-2));
    color:#fff; text-decoration:none; font-weight:800;
    padding:12px 22px; border-radius:999px;
    border:2px solid rgba(255,255,255,.25);
    font-size:clamp(15px,2vmin,18px);
    box-shadow:0 10px 24px rgba(27,94,32,.35);
    transition:transform .15s ease, box-shadow .2s ease;
    white-space:nowrap;
  }
  .cta:hover{ transform:translateY(-1px); box-shadow:0 14px 30px rgba(27,94,32,.45);}

  .intro{
    font-size:clamp(15px,2vmin,18px);
    line-height:1.55;
    color:#2d2d2d;
  }

  /* ===== Carousel =====
     Regras-chaves para estabilidade:
     - NENHUM margin/gap no track ou slide (mant√©m 100% exato por p√°gina)
     - Cada .slide = flex-basis:100%
     - Espa√ßamento interno vai dentro da .card
  */
  .carousel{
    position: relative;
    border-radius: var(--radius);
    background: #ffffff;
    box-shadow: inset 0 0 0 1px #e9ecef;
    overflow: hidden; /* garante que nada vaze */
    padding: 0;       /* nada que mude a ‚Äúlargura efetiva‚Äù */
  }

  .carousel-viewport{
    overflow: hidden;
    width: 100%;
  }

  .carousel-track{
    display: flex;
    /* sem gap! */
    will-change: transform;
    transform: translateX(0%);
    transition: transform 420ms ease;
    width: 100%;
  }

  .slide{
    flex: 0 0 100%;         /* 1 slide ocupa 100% da viewport do carrossel */
    /* sem padding/margin aqui pra n√£o distorcer o 100% */
    display: flex;          /* pra centralizar a card dentro */
    justify-content: center;
  }

  .card{
    width: 100%;
    max-width: 820px;       /* limita a largura interna do conte√∫do */
    background:#f8f9fa;
    border-left: 4px solid var(--brand-2);
    border-radius: 12px;
    padding: 18px;
    box-shadow: 0 2px 10px rgba(0,0,0,.05);
    margin: 14px;           /* espa√ßo visual interno que N√ÉO afeta o 100% do slide */
  }
  .card h3{ color:var(--brand-1); margin-bottom:8px; font-size:clamp(16px,2.2vmin,20px);}
  .card p { color:#555; font-size:clamp(13px,1.9vmin,16px); }

  /* Bot√µes laterais: fora do card, centrados verticalmente */
  .nav{
    position:absolute;
    top:50%; left:0; right:0;
    transform: translateY(-50%);
    display:flex; justify-content:space-between; align-items:center;
    pointer-events:none;  /* deixa s√≥ os bot√µes clic√°veis */
    padding: 0 0;         /* sem padding pra n√£o ‚Äúentrar‚Äù sobre o slide */
  }
  .btn{
    pointer-events:auto;
    border:0; border-radius: 40px;
    width: 42px; height: 42px;
    display:grid; place-items:center;
    background: #fff;
    box-shadow: 0 6px 18px rgba(0,0,0,.18);
    cursor:pointer;
    transition: transform .1s ease;
    position: relative;
    z-index: 2;
  }
  /* Posiciona os bot√µes um pouco para fora da √°rea do carrossel */
  #prev{ margin-left: 10px; }
  #next{ margin-right: 10px; }
  .btn:active{ transform: scale(.96); }
  .btn svg{ width: 18px; height: 18px; fill: #2f5130; }

  .dots{
    display:flex; gap:8px; justify-content:center; align-items:center;
    padding: 10px 0 14px;
  }
  .dot{
    width:8px; height:8px; border-radius:50%;
    background:#c9dccb;
    transition: transform .15s ease, background .2s ease;
  }
  .dot.active{ background:#2e7d32; transform: scale(1.2); }

  /* ===== Splash com logo gigante ===== */
  .splash{
    position:fixed; inset:0; display:grid; place-items:center;
    z-index:10; background:#fff;
    animation:fadeOut var(--t-card) ease forwards; animation-delay:var(--t-splash);
  }
  .splash .logo{
    width:var(--logo-size-start); height:var(--logo-size-start);
    background:url("{% static 'logo.png' %}") center/contain no-repeat;
    animation:logoPop var(--t-splash) ease forwards;
  }
  @keyframes fadeOut{ to{ opacity:0; visibility:hidden; } }
  @keyframes logoPop{
    0%{ transform:scale(.86); opacity:0; }
    50%{ transform:scale(1.08); opacity:1; }
    100%{ transform:scale(1); opacity:1; }
  }

  /* ===== Responsivo ===== */
  @media (max-width: 680px){
    .app{ width: min(92vw, 560px); }
    .header{ grid-template-columns: auto 1fr; }
    .cta{ grid-column: 1 / -1; margin-top: 6px; justify-self: start; }
    #prev{ margin-left: -10px; }
    #next{ margin-right: -10px; }
  }
</style>
</head>
<body>

<!-- Splash (logo grande) -->
<div class="splash"><div class="logo"></div></div>

<main class="app" id="app">
  <header class="header">
    <div class="logo" aria-hidden="true"></div>
    <div class="title">
      <h1>Escartola</h1>
      <div class="subtitle">Otimizador Inteligente de Escala√ß√µes</div>
    </div>
    <a href="{% url 'team' %}" class="cta">üöÄ Come√ßar Otimiza√ß√£o</a>
  </header>

  <p class="intro">
    O <strong>Escartola</strong> usa algoritmos gen√©ticos para criar as melhores escala√ß√µes do Cartola FC.
    Avaliamos milhares de combina√ß√µes considerando pre√ßo, pontua√ß√£o e forma√ß√£o t√°tica para maximizar seus pontos
    sem estourar o or√ßamento.
  </p>

  <!-- Carrossel -->
  <section class="carousel" aria-label="Informa√ß√µes do Escartola">
    <div class="carousel-viewport">
      <div class="carousel-track" id="track">
        <div class="slide">
          <article class="card">
            <h3>üß¨ Algoritmo Gen√©tico</h3>
            <p>Uma t√©cnica de <b>Intelig√™ncia Artificial</b> que imita a evolu√ß√£o da natureza. Ela <b>testa, mistura e ajusta</b> combina√ß√µes at√© encontrar a <b>escala√ß√£o mais forte dentro do seu or√ßamento</b>.</p>
          </article>
        </div>
        <div class="slide">
          <article class="card">
            <h3>‚öΩ An√°lise T√°tica</h3>
            <p>Forma√ß√µes <b>3-4-3, 4-3-3, 4-4-2, 3-5-2, 4-5-1, 5-3-2 e 5-4-1</b> com posicionamento proporcional ao campo.</p>
          </article>
        </div>
        <div class="slide">
          <article class="card">
            <h3>üí∞ Otimiza√ß√£o de Or√ßamento</h3>
            <p>Respeita o <b>limite de or√ßamento</b> e incentiva solu√ß√µes que usam o teto <b>sem ultrapassar o limite</b>.</p>
          </article>
        </div>
        <div class="slide">
          <article class="card">
            <h3>üìà M√©trica de Score</h3>
            <p>Combina <b>m√©dia de pontua√ß√£o dos atletas</b> e a<b>pontua√ß√£o da √∫ltima rodada</b> para balancear consist√™ncia e momento.</p>
          </article>
        </div>
      </div>
    </div>

    <div class="nav">
      <button class="btn" id="prev" aria-label="Anterior" title="Anterior">
        <svg viewBox="0 0 24 24"><path d="M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
      </button>
      <button class="btn" id="next" aria-label="Pr√≥ximo" title="Pr√≥ximo">
        <svg viewBox="0 0 24 24"><path d="M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg>
      </button>
    </div>

    <div class="dots" id="dots"></div>
  </section>
</main>

<script>
  // Marca a app como pronta ap√≥s o splash
  const SPLASH_MS = 900;
  window.addEventListener('load', () => {
    const app = document.getElementById('app');
    setTimeout(() => app.classList.add('ready'), SPLASH_MS);
  });

  // ===== Carousel com translateX e slides 100% est√°veis =====
  const track = document.getElementById('track');
  const prev = document.getElementById('prev');
  const next = document.getElementById('next');
  const dotsWrap = document.getElementById('dots');

  const slides = Array.from(track.querySelectorAll('.slide'));
  const total = slides.length;
  let index = 0;
  let autoTimer = null;
  const AUTO_MS = 4500;

  // Dots
  const dots = slides.map((_, i) => {
    const d = document.createElement('span');
    d.className = 'dot' + (i === 0 ? ' active' : '');
    d.addEventListener('click', () => goTo(i, true));
    dotsWrap.appendChild(d);
    return d;
  });

  function updateDots(i){ dots.forEach((d, k) => d.classList.toggle('active', k === i)); }

  function applyTransform(){
    // cada slide = 100% exatos
    track.style.transform = `translateX(${-index * 100}%)`;
  }

  function goTo(i, stopAuto=false){
    index = (i + total) % total;
    applyTransform();
    updateDots(index);
    if (stopAuto) resetAuto();
  }
  function nextSlide(){ goTo(index + 1); }
  function prevSlide(){ goTo(index - 1); }

  prev.addEventListener('click', prevSlide);
  next.addEventListener('click', nextSlide);

  function startAuto(){
    if (autoTimer) return;
    autoTimer = setInterval(nextSlide, AUTO_MS);
  }
  function stopAuto(){ clearInterval(autoTimer); autoTimer = null; }
  function resetAuto(){ stopAuto(); startAuto(); }

  // pausa autoplay na intera√ß√£o
  ['pointerdown','mouseenter','touchstart','focusin'].forEach(ev=>{
    track.addEventListener(ev, stopAuto);
    prev.addEventListener(ev, stopAuto);
    next.addEventListener(ev, stopAuto);
  });
  ['pointerup','mouseleave','touchend','focusout'].forEach(ev=>{
    track.addEventListener(ev, startAuto);
    prev.addEventListener(ev, startAuto);
    next.addEventListener(ev, startAuto);
  });

  // mant√©m alinhado em resize (sem rec√°lculo necess√°rio pois usamos %)
  window.addEventListener('resize', () => applyTransform());

  // inicia
  applyTransform();
  startAuto();
</script>

</body>
</html>
